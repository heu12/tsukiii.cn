import{o as ye,i as Ae}from"./lifecycle.BnM-4POS.js";import{d as m,f as S,t as C,a as v,p as Ce,b as Ie,h as t,m as L,e as p,s as I,g as x,r as d,c as Y,n as ke}from"./template.xQgAJZUT.js";import{s as k}from"./render.DEcfG12t.js";import{i as b}from"./if.BhME565V.js";import{e as ee,i as te}from"./each.ZxLKr6Fk.js";import{e as q}from"./utils.h_92gvcW.js";import{a as Te}from"./props.DdtPJQpi.js";import{I as O}from"./Icon.Cv_hXNo5.js";import{I as oe}from"./zh_TW.12WzXWON.js";import{i as se}from"./translation.a4BEjJI5.js";import{n as Be}from"./navigation-utils.Cc6bKnia.js";import{panelManager as ae}from"./panel-manager.EIcTVdBl.js";/* empty css                        */import"./config.Cqwz3fb3.js";var ze=m('<div class="text-center py-8 text-black/50 dark:text-white/50"><!> <p>暂无文章</p></div>'),Ee=m('<div class="post-category svelte-cz3h3s"> </div>'),Pe=m('<button class="post-item svelte-cz3h3s"><div class="post-title svelte-cz3h3s"><!> </div> <!></button>'),Se=m('<div class="post-content svelte-cz3h3s"></div>'),Le=m('<div class="text-center py-8 text-black/50 dark:text-white/50"><p>当前页面没有目录</p></div>'),qe=m('<span class="badge svelte-cz3h3s"> </span>'),Oe=m('<span class="dot-square svelte-cz3h3s"></span>'),He=m('<span class="dot-small svelte-cz3h3s"></span>'),Me=m('<button><!> <span class="toc-text svelte-cz3h3s"> </span></button>'),De=m('<div class="toc-content svelte-cz3h3s"></div>'),je=m(`<button aria-label="Table of Contents" id="mobile-toc-switch" class="btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90 lg:!hidden theme-switch-btn"><!></button> <div id="mobile-toc-panel" class="float-panel float-panel-closed mobile-toc-panel absolute md:w-[20rem] w-[calc(100vw-2rem)]
		top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-4 svelte-cz3h3s"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-bold text-[var(--primary)]"> </h3> <button aria-label="Close TOC" class="btn-plain rounded-lg h-8 w-8 active:scale-90 theme-switch-btn"><!></button></div> <!></div>`,1);function et(ne,ie){Ie(ie,!1);let H=L([]),M=L([]),T=L(""),g,B=L(!1),z=!1,G=!1,Q=3;const U=async()=>{await ae.togglePanel("mobile-toc-panel")},W=async e=>{await ae.togglePanel("mobile-toc-panel",e)},re=()=>{G=window.siteConfig?.toc?.useJapaneseBadge||!1,Q=window.siteConfig?.toc?.depth||3;const e=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),o=[],r=["ア","イ","ウ","エ","オ","カ","キ","ク","ケ","コ","サ","シ","ス","セ","ソ","タ","チ","ツ","テ","ト"];let a=0;e.forEach(l=>{if(l.id){const s=Number.parseInt(l.tagName.charAt(1),10);if(s>Q)return;const n=(l.textContent||"").replace(/#+\s*$/,"");let f="";s===1&&(a++,G&&a-1<r.length?f=r[a-1]:f=a.toString()),o.push({id:l.id,text:n,level:s,badge:f})}}),I(H,o)},le=()=>{const e=document.querySelectorAll(".card-base"),o=[];e.forEach(r=>{const a=r.querySelector('a[href*="/posts/"].transition.group'),l=r.querySelector('a[href*="/categories/"].link-lg'),s=a?.querySelector('svg[data-icon="mdi:pin"]');if(a){const n=a.getAttribute("href"),f=a.textContent?.replace(/\s+/g," ").trim()||"",i=l?.textContent?.trim()||"",u=!!s;n&&f&&o.push({title:f,url:n,category:i,pinned:u})}}),I(M,o)},ce=()=>{I(B,window.location.pathname==="/"||window.location.pathname==="")},ve=e=>{const o=document.getElementById(e);if(o){W(!1);const a=o.offsetTop-80;window.scrollTo({top:a,behavior:"smooth"})}},de=e=>{W(!1),Be(e)},D=()=>{const e=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),o=window.scrollY,r=100;let a="";e.forEach(l=>{if(l.id){const s=l.offsetTop-r;o>=s&&(a=l.id)}}),I(T,a)},fe=()=>{const e=document.querySelectorAll("h1, h2, h3, h4, h5, h6");g&&g.disconnect(),g=new IntersectionObserver(o=>{o.forEach(r=>{r.isIntersecting&&I(T,r.target.id)})},{rootMargin:"-80px 0px -80% 0px",threshold:0}),e.forEach(o=>{o.id&&g.observe(o)})},ue=()=>{if(typeof window<"u"&&(z=!!window.swup,!z)){const e=()=>{window.swup&&(z=!0,document.removeEventListener("swup:enable",e))};document.addEventListener("swup:enable",e),setTimeout(()=>{window.swup&&(z=!0,document.removeEventListener("swup:enable",e))},1e3)}},X=()=>{ce(),ue(),t(B)?le():(re(),fe(),D())};ye(()=>(setTimeout(X,100),window.addEventListener("scroll",D),()=>{g&&g.disconnect(),window.removeEventListener("scroll",D)})),typeof window<"u"&&(window.mobileTOCInit=X),Ae();var Z=je(),E=S(Z),pe=p(E);O(pe,{icon:"material-symbols:format-list-bulleted",class:"text-[1.25rem]"}),d(E);var $=x(E,2),j=p($),F=p(j),me=p(F,!0);d(F);var J=x(F,2),he=p(J);O(he,{icon:"material-symbols:close",class:"text-[1rem]"}),d(J),d(j);var be=x(j,2);{var ge=e=>{var o=Y(),r=S(o);{var a=s=>{var n=ze(),f=p(n);O(f,{icon:"material-symbols:article-outline",class:"text-2xl mb-2"}),ke(2),d(n),v(s,n)},l=s=>{var n=Se();ee(n,5,()=>t(M),te,(f,i)=>{var u=Pe(),w=p(u),y=p(w);{var N=c=>{O(c,{icon:"mdi:pin",class:"pinned-icon"})};b(y,c=>{t(i).pinned&&c(N)})}var K=x(y);d(w);var P=x(w,2);{var R=c=>{var h=Ee(),A=p(h,!0);d(h),C(()=>k(A,t(i).category)),v(c,h)};b(P,c=>{t(i).category&&c(R)})}d(u),C(()=>k(K,` ${t(i).title??""}`)),q("click",u,()=>de(t(i).url)),v(f,u)}),d(n),v(s,n)};b(r,s=>{t(M).length===0?s(a):s(l,!1)})}v(e,o)},we=e=>{var o=Y(),r=S(o);{var a=s=>{var n=Le();v(s,n)},l=s=>{var n=De();ee(n,5,()=>t(H),te,(f,i)=>{var u=Me();let w;var y=p(u);{var N=c=>{var h=qe(),A=p(h,!0);d(h),C(()=>k(A,t(i).badge)),v(c,h)},K=c=>{var h=Y(),A=S(h);{var _e=_=>{var V=Oe();v(_,V)},xe=_=>{var V=He();v(_,V)};b(A,_=>{t(i).level===2?_(_e):_(xe,!1)},!0)}v(c,h)};b(y,c=>{t(i).level===1?c(N):c(K,!1)})}var P=x(y,2),R=p(P,!0);d(P),d(u),C(()=>{w=Te(u,1,`toc-item level-${t(i).level??""} ${t(T)===t(i).id?"active":""}`,"svelte-cz3h3s",w,{active:t(T)===t(i).id}),k(R,t(i).text)}),q("click",u,()=>ve(t(i).id)),v(f,u)}),d(n),v(s,n)};b(r,s=>{t(H).length===0?s(a):s(l,!1)})}v(e,o)};b(be,e=>{t(B)?e(ge):e(we,!1)})}d($),C(e=>k(me,e),[()=>t(B)?se(oe.postList):se(oe.tableOfContents)]),q("click",E,U),q("click",J,U),v(ne,Z),Ce()}export{et as default};
